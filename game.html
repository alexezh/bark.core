<html>
<style>
    * {
      box-sizing: border-box;
    }
    
    /* Create two unequal columns that floats next to each other */
    .column {
      float: left;
      padding: 10px;
      height: 300px; /* Should be removed. Only for demonstration */
    }
    
    .left {
        width: 50%;
        height: 100%;
    }
    
    .right {
        width: 50%;
        height: 100%;
    }

    /* Clear floats after the columns */
    .row:after {
        height: 100%;
        content: "";
        display: table;
        clear: both;
    }

    .editor {
        display: flex;
        flex-direction: column;    
        height: 100%;
        width: 100%;
    }

    .toolbar {
        flex-grow: 0;
    }

    .textcontainer {
        flex-grow: 1;        
    }

    textarea {
        width: 100%;
        height: 100%;
        -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
        -moz-box-sizing: border-box;    /* Firefox, other Gecko */
        box-sizing: border-box;         /* Opera/IE 8+ */
    }
</style>
    <script src="./bark.js"></script>
    <script>
        function loadGame(gameFrame, code) {
            gameFrame.contentWindow.postMessage(code, '*');
        }
        function onRun() {
            if (window.self === window.top) {
                alert('top window');
            }

            const gameFrameContainer = document.getElementById('gameFrameContainer');
            const userCode = document.getElementById('userCode');
            let text = userCode.value;

            var gameFrame = document.createElement('iframe');
            gameFrame.id = 'gameFrame';
            gameFrame.src = document.location;
            gameFrame.onload = function() {
                loadGame(gameFrame, text);
            };
            // <iframe id="gameFrame" width="100%" height="100%" src="./">
            // </iframe>

            gameFrameContainer.appendChild(gameFrame);
        }
        function onStop() {
            const gameFrame = document.getElementById('gameFrame');
            gameFrame.contentWindow.postMessage("hello", '*');
        }
    </script>
    <body>
        <div class="row">
            <div class="column left" hight="100%" id="gameFrameContainer">
            </div>
    
            <div class="column right" height="100%">
                <div class="editor">
                    <div>
                        <button type="button" onclick="onRun()">run</button>
                        <button type="button" onclick="onStop()">stop</button>
                    </div>>
                    <div class="textcontainer">
                        <textarea class="textarea" id="userCode" placeholder="Enter text"></textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>